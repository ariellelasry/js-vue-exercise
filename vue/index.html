<html>
  <head>
    <title>Vue.js Exercise</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  </head>
  <body>
    <div id="app">
      List of people:
      <ul id="example-1">
        <li v-for="person in persons">
          {{ person.name }}
        </li>
      </ul>
      <br/>
      <button v-on:click="clickMe">Get five names</button>
    </div>

    <script>
    var app = new Vue({
      el: "#app",
      data: {
        persons: []
      },
      methods: {
        clickMe: function() {
          for (var i = 1; i <= 5; i++) {
            this.persons = [];
            this.getPerson(i);
          }
        },
        getPerson: function(i) {
          fetch("https://swapi.co/api/people/" + i + "/")
          .then(response =>
              response.json().then(data => ({
                  person: data,
                  status: response.status}))
          .then(res => {
            this.persons.push(res.person)}));
        }
      }
    })
    </script>
  </body>
</html>
